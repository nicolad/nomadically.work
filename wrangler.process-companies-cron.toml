name = "nomadically-work-process-companies-cron"
main = "workers/process-companies-cron.ts"
compatibility_date = "2026-02-01"

# Cron trigger — process companies every 6 hours (runs after ashby-crawler)
[triggers]
crons = ["0 */6 * * *"]

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "nomadically-work-db"
database_id = "632b9c57-8262-40bd-86c2-bc08beab713b"

# Queue: process-jobs-queue — producer only, sends pipeline trigger messages
[[queues.producers]]
queue = "process-jobs-queue"
binding = "PROCESS_JOBS_QUEUE"

# Environment variables
[vars]
APP_URL = "https://nomadically.work"

# Secrets (set via: npx wrangler secret put SECRET_NAME --name nomadically-work-process-companies-cron)
# - PROCESS_JOBS_WORKER_URL (optional — URL of the process-jobs worker for HTTP fallback)

# Observability
[observability]
enabled = true

[observability.logs]
enabled = true
invocation_logs = true
