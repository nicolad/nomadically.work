extend type Query {
  applications: [Application!]!
}

extend type Mutation {
  createApplication(input: ApplicationInput!): Application!
  updateApplication(id: Int!, input: UpdateApplicationInput!): Application!
}

type QuestionAnswer {
  questionId: String!
  questionText: String!
  answerText: String!
}

"""
Pipeline status for a tracked job application.
Maps to a kanban column in the UI.
"""
enum ApplicationStatus {
  pending
  submitted
  reviewed
  rejected
  accepted
}

type Application {
  id: Int!
  # Email of the currently authenticated user
  email: EmailAddress!
  jobId: String!
  resume: Upload
  questions: [QuestionAnswer!]!
  status: ApplicationStatus!
  notes: String
  jobTitle: String
  companyName: String
  createdAt: String!
}

input QuestionAnswerInput {
  questionId: String!
  questionText: String!
  answerText: String!
}

input ApplicationInput {
  jobId: String!
  resume: Upload
  questions: [QuestionAnswerInput!]!
  jobTitle: String
  companyName: String
}

input UpdateApplicationInput {
  status: ApplicationStatus
  notes: String
}
