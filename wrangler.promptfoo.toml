name = "nomadically-promptfoo-eval"
main = "workers/promptfoo-eval.ts"
compatibility_date = "2026-02-01"

# Routes - will be accessible at promptfoo-eval.your-subdomain.workers.dev
# Or configure a custom domain via Cloudflare dashboard

# Usage model - enables *.workers.dev subdomain
workers_dev = true

# Environment variables
[vars]
# These will be set from secrets, but you can override here for dev
# CLOUDFLARE_ACCOUNT_ID = "your_account_id"

# Secrets (set via: npx wrangler secret put SECRET_NAME)
# Required:
# - CLOUDFLARE_ACCOUNT_ID (your Cloudflare account ID)
# - CLOUDFLARE_API_KEY (for Workers AI)
#
# Optional (for AI Gateway):
# - CLOUDFLARE_GATEWAY_ID (your AI Gateway ID)
# - CF_AIG_TOKEN (for authenticated gateways)
#
# Optional (for AI Gateway provider authentication):
# - OPENAI_API_KEY
# - ANTHROPIC_API_KEY
# - GROQ_API_KEY
# - PERPLEXITY_API_KEY
# - GOOGLE_API_KEY
# - MISTRAL_API_KEY
# - COHERE_API_KEY
# - AZURE_OPENAI_API_KEY
# - HUGGINGFACE_API_KEY
# - REPLICATE_API_KEY
# - XAI_API_KEY

# Observability - Enable logging
[observability]
enabled = true

[observability.logs]
enabled = true
invocation_logs = true

# Limits
[limits]
cpu_ms = 50000 # 50 seconds max CPU time for LLM requests
