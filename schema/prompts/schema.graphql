extend type Query {
  prompt(name: String!, version: Int, label: String): Prompt
  prompts: [RegisteredPrompt!]!
  myPromptUsage(limit: Int): [PromptUsage!]!
}

extend type Mutation {
  createPrompt(input: CreatePromptInput!): Prompt!
  updatePromptLabel(name: String!, version: Int!, label: String!): Prompt!
}

enum PromptType {
  TEXT
  CHAT
}

type ChatMessage {
  role: String!
  content: String!
}

type PromptConfig {
  temperature: Float
  max_tokens: Int
  top_p: Float
  model: String
}

type Prompt {
  name: String!
  version: Int
  type: PromptType!
  prompt: String
  chatMessages: [ChatMessage!]
  config: PromptConfig
  labels: [String!]
  tags: [String!]
  createdAt: String
  updatedAt: String
  createdBy: String
  isUserSpecific: Boolean!
}

type RegisteredPrompt {
  name: String!
  type: String!
  content: JSON
  tags: [String!]!
  labels: [String!]!
  versions: [Int!]!
  lastUpdatedAt: String!
  lastConfig: JSON
  usageCount: Int
  lastUsedBy: String
}

type PromptUsage {
  promptName: String!
  userEmail: String!
  version: Int
  label: String
  usedAt: String!
  traceId: String
}

input CreatePromptInput {
  name: String!
  type: PromptType!
  prompt: String
  chatMessages: [ChatMessageInput!]
  config: PromptConfigInput
  labels: [String!]
  tags: [String!]
}

input ChatMessageInput {
  role: String!
  content: String!
}

input PromptConfigInput {
  temperature: Float
  max_tokens: Int
  top_p: Float
  model: String
}
